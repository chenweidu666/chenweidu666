# æ™ºèƒ½è¡£æŸœç®¡ç†ç³»ç»Ÿ - ç»Ÿä¸€éƒ¨ç½²è„šæœ¬

## æ¦‚è¿°

`smart-wardrobe.sh` æ˜¯ä¸€ä¸ªç»Ÿä¸€çš„éƒ¨ç½²å’Œç®¡ç†è„šæœ¬ï¼Œæ•´åˆäº†æ‰€æœ‰åŸæœ‰çš„éƒ¨ç½²è„šæœ¬åŠŸèƒ½ï¼Œæä¾›äº†æ›´ç®€æ´å’Œç»Ÿä¸€çš„å‘½ä»¤è¡Œç•Œé¢ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **ç»Ÿä¸€ç®¡ç†**: ä¸€ä¸ªè„šæœ¬ç®¡ç†æ‰€æœ‰éƒ¨ç½²å’Œè¿æ¥åŠŸèƒ½
- ğŸ¨ **å½©è‰²è¾“å‡º**: ä½¿ç”¨é¢œè‰²åŒºåˆ†ä¸åŒç±»å‹çš„ä¿¡æ¯
- ğŸ”§ **è‡ªåŠ¨æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿä¾èµ–å’ŒæœåŠ¡çŠ¶æ€
- ğŸ“¦ **å¤šå¹³å°éƒ¨ç½²**: æ”¯æŒæœ¬åœ°ã€CVMã€TKEã€SCFç­‰å¤šç§éƒ¨ç½²æ–¹å¼
- ğŸ”— **ä¾¿æ·è¿æ¥**: å¿«é€Ÿè¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨
- ğŸ“Š **çŠ¶æ€ç›‘æ§**: å®æ—¶æŸ¥çœ‹æœåŠ¡çŠ¶æ€å’Œæ—¥å¿—

## å¿«é€Ÿå¼€å§‹

### 1. æœ¬åœ°å¼€å‘

```bash
# æ„å»ºå¹¶å¯åŠ¨æœ¬åœ°å¼€å‘ç¯å¢ƒ
./smart-wardrobe.sh build

# ä»…å¯åŠ¨æœåŠ¡ï¼ˆå¦‚æœå·²æ„å»ºï¼‰
./smart-wardrobe.sh start

# åœæ­¢æœåŠ¡
./smart-wardrobe.sh stop

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./smart-wardrobe.sh status

# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./smart-wardrobe.sh logs
```

### 2. æœåŠ¡å™¨è¿æ¥

```bash
# è¿æ¥åˆ°æœåŠ¡å™¨ï¼ˆä½¿ç”¨SSHå¯†é’¥ï¼‰
./smart-wardrobe.sh connect

# è¿æ¥åˆ°å°çš®çƒæœåŠ¡å™¨ï¼ˆä½¿ç”¨å¯†ç ï¼‰
./smart-wardrobe.sh connect-xiaopiqi
```

### 3. éƒ¨ç½²åˆ°äº‘å¹³å°

```bash
# æ„å»ºéƒ¨ç½²åŒ…
./smart-wardrobe.sh deploy

# éƒ¨ç½²åˆ°è…¾è®¯äº‘CVM
./smart-wardrobe.sh deploy-cvm <IP> <USER> <KEY_FILE>

# ç¤ºä¾‹ï¼šéƒ¨ç½²åˆ°æŒ‡å®šæœåŠ¡å™¨
./smart-wardrobe.sh deploy-cvm 101.34.232.12 ubuntu ~/.ssh/tencent.pem
```

## é…ç½®è¯´æ˜

è„šæœ¬ä¸­çš„ä¸»è¦é…ç½®å˜é‡ï¼š

```bash
# æœåŠ¡å™¨é…ç½®
SERVER_IP="101.34.232.12"
SERVER_USER="ubuntu"
SERVER_PASSWORD="SY5718461006+"

# ç«¯å£é…ç½®
FRONTEND_PORT="7861"
BACKEND_PORT="7860"
```

## è¯¦ç»†å‘½ä»¤è¯´æ˜

### æœ¬åœ°å¼€å‘å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `build` | æ„å»ºå¹¶å¯åŠ¨æœ¬åœ°å¼€å‘ç¯å¢ƒ |
| `start` | å¯åŠ¨æœ¬åœ°æœåŠ¡ |
| `stop` | åœæ­¢æœ¬åœ°æœåŠ¡ |
| `status` | æŸ¥çœ‹æœåŠ¡çŠ¶æ€ |
| `logs [backend\|frontend]` | æŸ¥çœ‹æœåŠ¡æ—¥å¿— |

### éƒ¨ç½²å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `deploy` | æ„å»ºéƒ¨ç½²åŒ… |
| `deploy-cvm [IP] [USER] [KEY]` | éƒ¨ç½²åˆ°è…¾è®¯äº‘CVM |
| `deploy-tke [CLUSTER] [NS] [REGISTRY] [TAG]` | éƒ¨ç½²åˆ°è…¾è®¯äº‘TKE |
| `deploy-scf [FUNC] [VER]` | éƒ¨ç½²åˆ°è…¾è®¯äº‘SCF |
| `deploy-cursor` | éƒ¨ç½²åˆ°Cursorè¿œç¨‹ç¯å¢ƒ |

### è¿æ¥å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `connect` | è¿æ¥åˆ°æœåŠ¡å™¨ |
| `connect-xiaopiqi` | è¿æ¥åˆ°å°çš®çƒæœåŠ¡å™¨ |

### ç»´æŠ¤å‘½ä»¤

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `clean` | æ¸…ç†æ„å»ºæ–‡ä»¶ |
| `help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |

## ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´çš„æœ¬åœ°å¼€å‘æµç¨‹

```bash
# 1. æ„å»ºå¹¶å¯åŠ¨å¼€å‘ç¯å¢ƒ
./smart-wardrobe.sh build

# 2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
./smart-wardrobe.sh status

# 3. æŸ¥çœ‹æ—¥å¿—
./smart-wardrobe.sh logs

# 4. åœæ­¢æœåŠ¡
./smart-wardrobe.sh stop

# 5. æ¸…ç†æ„å»ºæ–‡ä»¶
./smart-wardrobe.sh clean
```

### éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

```bash
# 1. æ„å»ºéƒ¨ç½²åŒ…
./smart-wardrobe.sh deploy

# 2. éƒ¨ç½²åˆ°CVM
./smart-wardrobe.sh deploy-cvm 101.34.232.12 ubuntu ~/.ssh/tencent.pem

# 3. è¿æ¥åˆ°æœåŠ¡å™¨æ£€æŸ¥éƒ¨ç½²çŠ¶æ€
./smart-wardrobe.sh connect
```

### å¿«é€Ÿè¿æ¥æœåŠ¡å™¨

```bash
# ä½¿ç”¨SSHå¯†é’¥è¿æ¥
./smart-wardrobe.sh connect

# ä½¿ç”¨å¯†ç è¿æ¥ï¼ˆå°çš®çƒæœåŠ¡å™¨ï¼‰
./smart-wardrobe.sh connect-xiaopiqi
```

## ç«¯å£é…ç½®

- **å‰ç«¯ç«¯å£**: 7861 (ç”Ÿäº§ç¯å¢ƒ) / 3000 (å¼€å‘ç¯å¢ƒ)
- **åç«¯ç«¯å£**: 7860 (ç”Ÿäº§ç¯å¢ƒ) / 3001 (å¼€å‘ç¯å¢ƒ)

## ä¾èµ–è¦æ±‚

- Node.js 18+
- npm
- Docker (ç”¨äºå®¹å™¨åŒ–éƒ¨ç½²)
- Docker Compose (ç”¨äºå®¹å™¨ç¼–æ’)
- SSH å®¢æˆ·ç«¯

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é—®é¢˜**
   ```bash
   chmod +x smart-wardrobe.sh
   ```

2. **ä¾èµ–ç¼ºå¤±**
   ```bash
   # æ£€æŸ¥Node.js
   node --version
   
   # æ£€æŸ¥npm
   npm --version
   ```

3. **ç«¯å£å ç”¨**
   ```bash
   # æŸ¥çœ‹ç«¯å£å ç”¨
   netstat -tuln | grep :3000
   netstat -tuln | grep :3001
   
   # åœæ­¢å ç”¨è¿›ç¨‹
   ./smart-wardrobe.sh stop
   ```

4. **æœåŠ¡æ— æ³•å¯åŠ¨**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   ./smart-wardrobe.sh logs backend
   ./smart-wardrobe.sh logs frontend
   ```

## ä¸åŸè„šæœ¬çš„å¯¹æ¯”

| åŠŸèƒ½ | åŸè„šæœ¬ | ç»Ÿä¸€è„šæœ¬ |
|------|--------|----------|
| æœ¬åœ°æ„å»º | `build.sh` | `./smart-wardrobe.sh build` |
| éƒ¨ç½²åŒ…æ„å»º | `deploy.sh` | `./smart-wardrobe.sh deploy` |
| CVMéƒ¨ç½² | `deploy-cvm.sh` | `./smart-wardrobe.sh deploy-cvm` |
| æœåŠ¡å™¨è¿æ¥ | `connect-server.sh` | `./smart-wardrobe.sh connect` |
| å°çš®çƒè¿æ¥ | `connect-xiaopiqi.sh` | `./smart-wardrobe.sh connect-xiaopiqi` |

## æ³¨æ„äº‹é¡¹

1. é¦–æ¬¡ä½¿ç”¨å‰è¯·ç¡®ä¿å·²å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–
2. éƒ¨ç½²åˆ°äº‘å¹³å°å‰è¯·ç¡®ä¿å·²é…ç½®ç›¸åº”çš„è®¿é—®æƒé™
3. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å»ºè®®ä½¿ç”¨HTTPS
4. å®šæœŸå¤‡ä»½æ•°æ®åº“æ–‡ä»¶ `backend/wardrobe.db`

## æ›´æ–°æ—¥å¿—

- **v1.0.0**: åˆå§‹ç‰ˆæœ¬ï¼Œæ•´åˆæ‰€æœ‰åŸæœ‰è„šæœ¬åŠŸèƒ½
- æ”¯æŒå½©è‰²è¾“å‡ºå’ŒçŠ¶æ€ç›‘æ§
- ç»Ÿä¸€é…ç½®ç®¡ç†
- ç®€åŒ–å‘½ä»¤è¡Œç•Œé¢ 